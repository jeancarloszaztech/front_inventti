"use strict";(globalThis["webpackChunkquasar_project"]=globalThis["webpackChunkquasar_project"]||[]).push([[517],{5517:(e,l,t)=>{t.r(l),t.d(l,{default:()=>w});var a=t(1758),o=t(8790),n=t(9104);const s={class:"row"},i={class:"col"},d={class:"row"},u={class:"q-pa-md q-gutter-md col"},r={ref:"scrollTargetRef",class:"q-pa-md",style:{"max-height":"60vh",overflow:"auto"}},c={class:"text-grey-8 q-gutter-xs"};function g(e,l,t,g,m,p){const f=(0,a.g2)("q-icon"),v=(0,a.g2)("q-input"),b=(0,a.g2)("q-item-label"),h=(0,a.g2)("q-item-section"),k=(0,a.g2)("q-btn"),_=(0,a.g2)("q-item"),F=(0,a.g2)("q-infinite-scroll"),C=(0,a.g2)("q-list"),R=(0,a.g2)("q-page-sticky"),q=(0,a.g2)("q-card-section"),L=(0,a.g2)("q-card-actions"),M=(0,a.g2)("q-card"),S=(0,a.g2)("q-dialog"),A=(0,a.g2)("q-page"),x=(0,a.gN)("close-popup");return(0,a.uX)(),(0,a.Wv)(A,{class:"flex-center"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",s,[l[7]||(l[7]=(0,a.Lk)("div",{class:"col-2"},null,-1)),(0,a.Lk)("div",i,[(0,a.bF)(v,{filled:"",modelValue:e.textSearchMod,"onUpdate:modelValue":[l[0]||(l[0]=l=>e.textSearchMod=l),e.onTextSearchChange],label:e.$t("pages_General_TextSearchFieldDesc"),maxlength:"12"},{append:(0,a.k6)((()=>[(0,a.bF)(f,{name:"search"})])),_:1},8,["modelValue","label","onUpdate:modelValue"])]),l[8]||(l[8]=(0,a.Lk)("div",{class:"col-2"},null,-1))]),(0,a.Lk)("div",d,[l[10]||(l[10]=(0,a.Lk)("div",{class:"col-2"},null,-1)),(0,a.Lk)("div",u,[(0,a.bF)(C,{bordered:"",class:"rounded-borders"},{default:(0,a.k6)((()=>[(0,a.bF)(b,{header:""},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(e.$t("pages_General_TotalCountDesc"))+" "+(0,o.v_)(e.itemsCountMod),1)])),_:1}),(0,a.Lk)("div",r,[(0,a.bF)(F,{onLoad:e.onScroll,offset:e.offsetRef,"scroll-target":e.scrollTargetRef},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.itemsMod,((t,n)=>((0,a.uX)(),(0,a.Wv)(_,{key:n},{default:(0,a.k6)((()=>[(0,a.bF)(h,null,{default:(0,a.k6)((()=>[(0,a.bF)(b,null,{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(t.summary),1)])),_:2},1024),(0,a.bF)(b,{caption:"",lines:"2"},{default:(0,a.k6)((()=>[(0,a.eW)((0,o.v_)(t.momment)+" Temp: "+(0,o.v_)(t.temperatureC)+"ÂºC",1)])),_:2},1024)])),_:2},1024),(0,a.bF)(h,{top:"",side:""},{default:(0,a.k6)((()=>[(0,a.Lk)("div",c,[(0,a.bF)(k,{class:"gt-xs",size:"12px",flat:"",dense:"",round:"",icon:"edit",onClick:l[1]||(l[1]=l=>e.formOpened=!0)})])])),_:1})])),_:2},1024)))),128))])),_:1},8,["onLoad","offset","scroll-target"])],512)])),_:1}),(0,a.bF)(R,{position:"bottom-right",offset:[48,48]},{default:(0,a.k6)((()=>[(0,a.bF)(k,{fab:"",icon:"add",color:"primary",onClick:e.cleanFormFields},null,8,["onClick"])])),_:1})]),(0,a.bF)(S,{modelValue:e.formOpenedMod,"onUpdate:modelValue":l[6]||(l[6]=l=>e.formOpenedMod=l)},{default:(0,a.k6)((()=>[(0,a.bF)(M,{style:{"min-width":"350px"}},{default:(0,a.k6)((()=>[(0,a.bF)(q,null,{default:(0,a.k6)((()=>l[9]||(l[9]=[(0,a.Lk)("div",{class:"text-h6"},"Consulta de clima",-1)]))),_:1}),(0,a.bF)(q,{class:"q-pt-none"},{default:(0,a.k6)((()=>[(0,a.bF)(v,{modelValue:e.latitudeRef,"onUpdate:modelValue":l[2]||(l[2]=l=>e.latitudeRef=l),label:"Latitude",onKeyup:l[3]||(l[3]=(0,n.jR)((l=>e.formOpenedMod=!1),["enter"]))},null,8,["modelValue"]),(0,a.bF)(v,{modelValue:e.longitudeRef,"onUpdate:modelValue":l[4]||(l[4]=l=>e.longitudeRef=l),label:"Longitude",onKeyup:l[5]||(l[5]=(0,n.jR)((l=>e.formOpenedMod=!1),["enter"]))},null,8,["modelValue"])])),_:1}),(0,a.bF)(L,{align:"right",class:"text-primary"},{default:(0,a.k6)((()=>[(0,a.bo)((0,a.bF)(k,{flat:"",label:"Cancel"},null,512),[[x]]),(0,a.bo)((0,a.bF)(k,{flat:"",label:"Consultar",onClick:e.consultarClima},null,8,["onClick"]),[[x]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),l[11]||(l[11]=(0,a.Lk)("div",{class:"col-2"},null,-1))])])),_:1})}t(239);var m=t(8734),p=t(660),f=t(4907),v=t(3537);const b=(0,a.pM)({name:"ConsultasClimaPage",setup(){const e=(0,v.s9)().t,l=(0,f.A)(),t=(0,m.KR)(null),a=(0,m.KR)(0),o=(0,m.KR)([]),n=(0,m.KR)(null);let s=(0,m.KR)(0);const i=(0,m.KR)(""),d=(0,m.KR)(""),u=(0,m.KR)(!1);let r=e=>{let l=new Date(e),t=String(l.getDate()).padStart(2,"0"),a=String(l.getMonth()+1).padStart(2,"0"),o=String(l.getHours()).padStart(2,"0"),n=String(l.getMinutes()).padStart(2,"0"),s=`${t}/${a} ${o}:${n}`;return s},c=()=>{a.value=1,o.value=[]},g=(n,i)=>{let d="api/v1/clima-tempo?paging-size=20&paging-page=0";t.value&&t.value.length>3&&(d+=`&text-search=${t.value}`),p.api.get(d).then((e=>{a.value=e.data.totalizers.totalCount;let l=e.data.data,t=[];for(const a of l){let e=r(a.momment);t.push({...a,momment:e})}o.value=t,s.value++})).catch((t=>{l.notify({color:"negative",position:"top",message:e("pages_General_LoadingFailedMsg"),icon:"report_problem"})})).finally((()=>{s.value=0}))};setTimeout((()=>g()),50);let b=(n,i)=>{if(o.value.length>=a.value)return void i();console.log(o.value.length),console.log(a.value);let d=`api/v1/clima-tempo?paging-size=20&paging-page=${s.value}`;t.value&&t.value.length>3&&(d+=`&text-search=${t.value}`),p.api.get(d).then((e=>{const l=e.data.data;let t=[];for(const a of l){let e=r(a.momment);t.push({...a,momment:e})}o.value=[...o.value,...t],s.value++})).catch((t=>{console.log(t),l.notify({color:"negative",position:"top",message:e("pages_General_LoadingFailedMsg"),icon:"report_problem"})})).finally((()=>i()))},h=()=>{i.value="",d.value="",u.value=!0},k=()=>{let t=`api/v1/clima-tempo/sincrono?lat=${i.value}&lon=${d.value}`;p.api.get(t).then((e=>{const l=e.data.data;c();let t=r(l.momment);o.value.push({...l,momment:t})})).catch((t=>{console.log(t),l.notify({color:"negative",position:"top",message:e("pages_General_LoadingFailedMsg"),icon:"report_problem"})}))};return{formOpenedMod:u,formUsernameMod:(0,m.KR)(null),formIsAdminMod:(0,m.KR)(!1),textSearchMod:t,itemsCountMod:a,itemsMod:o,scrollTargetRef:n,offsetRef:s,latitudeRef:i,longitudeRef:d,onScroll:b,cleanFormFields:h,consultarClima:k,onLoadItems:g,onTextSearchChange(e,l,t){g()}}}});var h=t(2807),k=t(7716),_=t(5816),F=t(492),C=t(3999),R=t(3796),q=t(8049),L=t(124),M=t(5173),S=t(62),A=t(3718),x=t(7908),y=t(3316),Q=t(4189),K=t(2669),V=t(8672),T=t(8582),$=t.n(T);const I=(0,h.A)(b,[["render",g]]),w=I;$()(b,"components",{QPage:k.A,QInput:_.A,QIcon:F.A,QList:C.A,QItemLabel:R.A,QInfiniteScroll:q.A,QItem:L.A,QItemSection:M.A,QBtn:S.A,QPageSticky:A.A,QDialog:x.A,QCard:y.A,QCardSection:Q.A,QCardActions:K.A}),$()(b,"directives",{ClosePopup:V.A})}}]);